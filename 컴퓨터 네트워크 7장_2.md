># 7-4 인터넷 프로토콜 버전 4

## 인터넷의 네트워크 계층은 여러 버전을 거쳤지만 IP 버전 4(IPv4)와 IP 버전 6(IPv6)의 두 가지 버전만 살아 남았다.
## IPv4는 거의 고갈되었지만 아직 이 버전을 사용하는 영역이 있고 IPv6의 기반이기 때문에 이에 대해 논의한다.

># 7.4.1 IPv4 주소 지정
## 각 장치의 인터넷 연결을 식별하기 위해 TCP/IP 프로토콜 제품군의 IP 계층에서 사용되는 식별자를 인터넷 주소 또는 IP 주소라고 한다.
## IPv4 주소는 호스트나 라우터의 인터넷 연결을 고유하고 보편적으로 정의하는 32비트 주소이다.
## IP 주소는 호스트나 라우터가 아닌 연결 주소이다.
## ICANN(Internet Corporation for Assigned Names and Numbers)이 IP 주소를 관리하고 있다.

># 주소 공간(Adress Space)
## 주소 공간은 프로토콜이 사용하는 주소의 총 개수이다.
## 프로토콜이 주소를 정의하기 위해 b 비트를 사용하는 경우 각 비트가 두 가지 다른 값(0 또는 1)을 가질 수 있으므로 주소 공간은 2^b이다.
## IPv4는 32비트 주소를 사용한다. 즉, 주소 공간은 2^32 또는 4,294,967,296(40억 이상)이다.
## 제한이 없다면 40억 개 이상의 장치가 인터넷에 연결될 수 있다.

># 표기법
## IPv4 주소를 표시하기 위한 일반적인 표기법은 이진 표기법(베이스 2), 점선 10진 표기법(베이스 256), 16진 표기법(베이스 16) 세 가지가 있습니다.

># 그림 7.4 IPv4 주소 지정에서 세 가지 다른 표기법
<img width="848" alt="스크린샷 2024-04-15 오후 11 39 50" src="https://github.com/junhyeok030213/computer_network/assets/106813806/85b7aa57-d3db-44f8-b6d8-7e8b446f602e">

># 주소 지정의 계층 구조
## 전화 네트워크나 우편 네트워크와 같이 배달과 관련된 모든 통신 네트워크에서 주소 지정 시스템은 계층적이다.
## 32비트 IPv4 주소도 계층적이지만 두 부분으로만 나누어 진다.
## 접두사라고 하는 주소의 첫 번째 부분은 네트워크를 정의한다. 접미사라고 하는 주소의 두번째 부분은 노드를 정의한다.

># 그림 7.5 주소 지정의 계층 구조
<img width="828" alt="스크린샷 2024-04-15 오후 11 53 26" src="https://github.com/junhyeok030213/computer_network/assets/106813806/6dba722a-f56c-421a-9412-4a79fb83d122">

># Classful Addressing(품격있는? 주소지정)
## 인터넷이 시작될 때 IPv4 주소는 고정 길이 접두사로 설계되었으나 크고 작은 네트워크를 모두 수용하기 위해 하나가 아닌 3개의 고정 길이 접두사(n=8, n=16, n=24)로 설계되었다.
## 전체 주소 공간은 그림 7.6과 같이 5개의 클래스(클래스 A, B, C, D, E)로 구분된다.
## 이 체계를 클래스형 주소 지정이라고 한다.
## 클래스형 주소 지정은 과거의 일이지만 나중에 설명할 클래스 없는 주소지정을 이해하는데 도움이 된다.

># 그림 7.6 클래스 주소 지정에서 주소 공간의 점유
<img width="846" alt="스크린샷 2024-04-15 오후 11 58 08" src="https://github.com/junhyeok030213/computer_network/assets/106813806/71683e21-f6ca-407d-921f-680fcccfa272">

># 클래스 없는 주소 지정
## 인터넷이 성장함에 따라 장기적인 솔루션으로 더 큰 주소 공간이 필요하다는 것이 분명해졌다.
## 그러나 주소 공간이 커지면 IP 주소의 길이도 길어져야 하며, 이는 IP 패킷의 형식을 변경해야 함을 의미한다.
## 장기적인 솔루션이 이미 고안되어 IPv6라고 불리지만, 동일한 주소 공간을 사용하되 주소 분포를 변경하여 각 조직에 공정한 공유를 제공하는 단기 솔루션도 고안되었다.
## 단기 솔루션은 여전히 IPv4 주소를 사용하지만 이를 클래스 없는 주소 지정이라고 한다.

># 그림 7.7 클래스 없는 주소 지정에서 가변 길이 블록
><img width="842" alt="스크린샷 2024-04-16 오전 12 01 40" src="https://github.com/junhyeok030213/computer_network/assets/106813806/8dcf68a4-bb4b-4737-a947-79bffcf4f98a">

># 그림 7.8 슬래시 표기법(CIDR)
## CIDR: Classless InterDomain Routing -> 사이더로 발음 (cider)]
<img width="849" alt="스크린샷 2024-04-16 오전 12 02 29" src="https://github.com/junhyeok030213/computer_network/assets/106813806/a4d6954b-7b8f-46fa-b4b5-02ea553d00f8">

># 클래스리스 어드레싱에서 정보 추출
<img width="830" alt="스크린샷 2024-04-16 오전 12 03 03" src="https://github.com/junhyeok030213/computer_network/assets/106813806/b950c47b-a936-43a8-8c67-21a7e3e4356b">

># 예제 7.1
## 클래스 없는 주소는 167.199.170.82/27로 지정된다. 위에 세가지 정보는 다음과 같이 확인할 수 있다. 네트워크의 주소 수는 2^32-n = 25 = 32개 주소이다. 첫 번째 주소는 처음 27비트를 유지하고 나머지는 비트를 0s로 변경하여 찾을 수 있다.

<img width="815" alt="스크린샷 2024-04-16 오전 12 05 24" src="https://github.com/junhyeok030213/computer_network/assets/106813806/7b2f65bf-dc02-4a23-b86a-b1e8e29d2b11">

## 마지막 주소는 처음 27비트를 유지하고 나머지 비트를 1로 변경하면 찾을 수 있다.
<img width="804" alt="스크린샷 2024-04-16 오전 12 05 59" src="https://github.com/junhyeok030213/computer_network/assets/106813806/fa07f196-3cfb-4f0a-a542-27920f55ed7d">

># 예제 7.2
## 마스크를 사용하여 예제 7.1을 반복한다. 점으로 구분된 십진수 표기법의 마스크는 256.256.256.224이다. AND, OR 및 NOT 연산은 도서 웹사이트의 계산기와 애플릿을 사용하여 개별 바이트에 적용할 수 있다.
<img width="837" alt="스크린샷 2024-04-16 오전 12 07 11" src="https://github.com/junhyeok030213/computer_network/assets/106813806/b8b7adb6-c910-4ef7-9ef2-c877bdc04625">

># 예제 7.3
## 클래스 없는 주소 지정에서는 주소 자체가 해당 주소가 속한 블럭을 정의할 수 없다. 예를 들어 주소 230.8.24.56은 여러 블럭에 속할 수 있다. 그 중 일부는 해당 블럭과 관련된 접두사 값과 함께 아래에 표기된다.
<img width="787" alt="스크린샷 2024-04-16 오전 12 08 22" src="https://github.com/junhyeok030213/computer_network/assets/106813806/a55f8a78-91bb-405a-b3cf-b2f5b753cc3d">

># 그림 7.9 네트워크 주소
## 네트워크 주소: 블록의 첫 번째 주소는 일반적으로 어떤 장치에도 할당되지 않습니다. 이 주소는 조직을 나머지 세계로 나타내는 네트워크 주소로 사용됩니다.
<img width="836" alt="스크린샷 2024-04-16 오전 12 09 05" src="https://github.com/junhyeok030213/computer_network/assets/106813806/6b48e484-a240-4fe5-93ea-8615ccc6ed87">

># 예제 7.4

## ISP가 1000개의 주소 블럭을 요청하였다. 1000은 2의 거듭제곱이 아니므로 1024개의 주소가 부여된다. 접두사 길이는 n = 32 - log_2 1024 = 22로 계산된다. 사용 가능한 블럭 18.14.12.0/22가 ISP에 부여된다. 10진수의 첫 번째 주소는 302,910,464로 1024로 나누어지는 것을 알 수 있다.

># 7.4.1 IPv4 주소지정: 서브네팅(Subnetting)
## 서브네팅을 사용하여 더 많은 계층을 만들 수 있다. 일정 범위의 주소를 가진 기관(혹은 ISP)은 범위를 부 범위로 나누고, 이를 서브네트워크(혹은 서브넷)에 할당할 수 있다.
## 서브넷 설계
- 기관에 할당된 전체 주소의 수를 N, 접두사의 길이를 n, 각 서브넷에 할당된 주소의 수를 N_sub, 각 서브넷의 접두사의 길이를 n_sub로 가정하자.
- 각 서브네트워크의 주소의 수는 2의 제곱승(power of 2) 이여야 한다.
- 각 서브네트워크의 접두사의 길이는 다음 공식을 이용해 구할 수 있다.
<img width="234" alt="스크린샷 2024-04-16 오전 12 15 02" src="https://github.com/junhyeok030213/computer_network/assets/106813806/c146ff7c-8a32-4376-a3c1-9c131cc8f186">

- 각 서브네트워크의 첫 주소는 서브네트워크의 주소 수로 나눌 수 있어야 한다. 이는 더 큰 서브네트워크에 주소를 먼저 할당하면 된다.

># 예 7.5 - 1
## 조직에는 시작 주소가 14.24.74.0/24인 주소 블럭이 부여된다. 조직은 3개의 서브넷에서 사용할 3개의 주소 하위 블럭(10개 주소의 하위 블럭 1개, 60개 주소의 하위 블럭 1개, 120개 주소의 하위 블럭 1개)이 필요하다. 하위블럭을 디자인해라
# 해결책
## 이 블럭에는 2^(32-24) = 256 개의 주소가 있다. 첫 번째 주소는 14.24.74.0/24이다. 마지막 주소는 14.24.74.255/24이다. 세 번째 요구 사항을 충족하기 위해 가장 큰 것부터 시작하여 가장 작은 것까지 끝나는 하위 블럭에 주소를 할당한다.

># 예 7.5 - 2
